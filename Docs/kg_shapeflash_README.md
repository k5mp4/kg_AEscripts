# kg_shapeflash.jsx

**バージョン:** 1.0.0  
**作者:** kg_scripts

シェイプレイヤーにモーショングラフィックス用のフラッシュアニメーションを適用するAfter Effectsスクリプトです。

---

## 概要

inPointから順に「線→塗り→消える」、outPointで「塗り→線」というフラッシュアニメーションを自動適用します。複数パスへの対応、ずらしアニメーション機能も搭載。

### 主な特徴

- **UIなし即座実行**: 選択したシェイプレイヤーに即座に適用
- **複数パス対応**: シェイプレイヤー内のすべてのFill/Strokeに適用
- **線の自動追加**: 塗りのみのシェイプに自動で線を追加
- **ずらしアニメーション**: 複数パスを1Fずつずらして順に表示
- **反転機能**: ずらしの順番を逆転可能

---

## 使い方

### 基本的な使用方法

1. After Effectsでコンポジションを開く
2. シェイプレイヤー（塗りを含む）を選択
3. `File` > `Scripts` > `Run Script File...` からスクリプトを実行
4. フラッシュアニメーションが適用される

### エフェクトコントロール

スクリプト適用後、レイヤーに以下のチェックボックスが追加されます：

| コントロール | 説明 |
|--------------|------|
| **塗りを常に表示** | 中間でも塗りを表示。IN/OUTで塗り⇔線の切替あり |
| **線を常に表示** | 中間でも線を表示。IN/OUTで塗り⇔線の切替あり |
| **ずらしアニメーション** | 各パスを1Fずつずらして順に表示 |
| **ずらし反転** | ずらしの順番を反転（下位パスから先に表示） |

---

## アニメーション詳細

### デフォルト動作

| タイミング | 塗り | 線 |
|------------|------|-----|
| **inPoint 0~2F** | 非表示 | 表示 |
| **inPoint 2~4F** | 表示 | 非表示 |
| **中間** | 非表示 | 非表示 |
| **outPoint 4F前~2F前** | 表示 | 非表示 |
| **outPoint 2F前~end** | 非表示 | 表示 |

### 塗りを常に表示ON

```
IN: 塗り(2F) → 線(2F) → 塗り（常時表示）→ 線(2F) → 塗り(2F) :OUT
```

### ずらしアニメーション

```
パス1: 0F開始
パス2: 1F遅れ
パス3: 2F遅れ
...
```

---

## 技術仕様

### 対応レイヤー

- シェイプレイヤー（塗りを含むもの）
- 線がない場合は自動追加（塗りと同色、線幅4px）

### エクスプレッション

- Fill/Strokeの不透明度にエクスプレッションを設定
- inPoint/outPointに基づいてフレーム計算
- チェックボックスで動作を動的に切替可能

---

## 更新履歴

### v1.0.0
- 初回リリース
- 基本フラッシュアニメーション（線→塗り→消える→塗り→線）
- エフェクトコントロールによる表示切替
- 複数パス対応
- ずらしアニメーション機能
- ずらし反転機能
- 線の自動追加機能

---

## 注意事項

- シェイプレイヤーに塗り（Fill）が必要です
- 複数回実行するとエフェクトが重複します（一度削除してから再実行）
- Undoで元に戻せます

---

## ライセンス

このスクリプトは自由にご使用いただけます。
